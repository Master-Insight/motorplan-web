---
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Consulta de Adjudicación">
  <section
    class="bg-primary-light w-full flex justify-center items-center py-10 px-4 sm:px-6 lg:px-8"
  >
    <div class="w-full max-w-md bg-white p-6 rounded-lg shadow-lg">
      <h2 class="text-xl font-bold text-gray-800 text-center mb-4">
        Consulta tu adjudicación
      </h2>
      <p class="text-gray-600 text-center mb-6">
        Ingresá tu DNI y el número de sorteo para ver el estado de tu
        adjudicación.
      </p>
      <form id="consultaForm" class="space-y-4">
        <div>
          <label for="dni" class="block text-gray-700 font-medium">DNI</label>
          <input
            type="text"
            id="dni"
            class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Ejemplo: 12345678"
            required
          />
        </div>
        <div>
          <label for="sorteo" class="block text-gray-700 font-medium"
            >Número de sorteo</label
          >
          <input
            type="text"
            id="sorteo"
            class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Ejemplo: 202401"
            required
          />
        </div>
        <button
          type="submit"
          class="bg-gray-600 text-white px-4 py-2 rounded-lg w-full hover:bg-gray-800 transition"
        >
          Consultar
        </button>
      </form>
      <p id="loadingMessage" class="text-gray-600 text-center mt-4 hidden">
        Cargando información...
      </p>
      <p id="errorMessage" class="text-red-500 text-center mt-4 hidden"></p>
    </div>
  </section>

  <script>
    document
      .getElementById("consultaForm")
      .addEventListener("submit", function (event) {
        event.preventDefault();

        const dni = document.getElementById("dni").value.trim();
        const sorteo = document.getElementById("sorteo").value.trim();

        if (dni && sorteo) {
          const url = `http://motorplan.onmedia.com.ar/frontend/cliente?dni=${dni}&sorteo=${sorteo}`;
          window.location.href = url;
        } else {
          alert("Por favor, completá ambos campos.");
        }
      });
  </script>
</Layout>
